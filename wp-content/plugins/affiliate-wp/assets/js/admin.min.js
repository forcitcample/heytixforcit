jQuery(document).ready(function(e){var a;window.formfield="",e("body").on("click",".affwp_settings_upload_button",function(t){t.preventDefault();var r=e(this);return window.formfield=e(this).parent().prev(),a?void a.open():(a=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",title:r.data("uploader_title"),button:{text:r.data("uploader_button_text")},multiple:!1}),a.on("menu:render:default",function(e){var a={};e.unset("library-separator"),e.unset("gallery"),e.unset("featured-image"),e.unset("embed"),e.set(a)}),a.on("insert",function(){var e=a.state().get("selection");e.each(function(e){e=e.toJSON(),window.formfield.val(e.url)})}),void a.open())});var a;window.formfield="",e(".affwp-referrals-export-toggle").click(function(){e(".affwp-referrals-export-toggle").toggle(),e("#affwp-referrals-export-form").slideToggle()}),e("#affwp-referrals-export-form").submit(function(){return confirm(affwp_vars.confirm)?void 0:!1}),e(".affwp-datepicker").length&&e(".affwp-datepicker").datepicker(),e(".affwp-user-search").keyup(function(){var a=e(this).val();e(".affwp-ajax").show(),data={action:"affwp_search_users",user_name:a},e.ajax({type:"POST",data:data,dataType:"json",url:ajaxurl,success:function(a){if(e(".affwp-ajax").hide(),e("#affwp_user_search_results").html(""),e(a.results).appendTo("#affwp_user_search_results"),e(".affwp-woo-coupon-field").length){var t=e(".affwp-woo-coupon-field #affwp_user_search_results").height();e(".affwp-woo-coupon-field #affwp_user_search_results").css("top","-"+t+"px")}}})}),e("body").on("click.rcpSelectUser","#affwp_user_search_results a",function(a){a.preventDefault();var t=e(this).data("login"),r=e(this).data("id");e("#user_name").val(t),e("#user_id").val(r),e("#affwp_user_search_results").html("")});var a;e("body").on("click",".upload_image_button",function(t){t.preventDefault();var r=e(this).prev();return a?void a.open():(a=wp.media.frames.file_frame=wp.media({frame:"select",title:"Choose Image",multiple:!1,library:{type:"image"},button:{text:"Use Image"}}),a.on("menu:render:default",function(e){var a={};e.unset("library-separator"),e.unset("gallery"),e.unset("featured-image"),e.unset("embed"),e.set(a)}),a.on("select",function(){var t=a.state().get("selection").first().toJSON();r.val(t.url);var f=e("<img />");f.attr("src",t.url),e("#preview_image").empty().append(f),e("#preview_image img")&&e("#preview_image").show()}),void a.open())})});