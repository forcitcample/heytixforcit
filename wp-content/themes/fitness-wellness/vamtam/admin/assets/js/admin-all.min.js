!function(a,b){"use strict";var c,d,e,f=function(){c=a('<div id="wpv-colorpicker"></div>').hide(),a("body").append(c),e=a.farbtastic("#wpv-colorpicker"),c.append(function(){return a('<a class="transparent">transparent</a>').click(function(){d&&(a(d).val("transparent").css({background:"white"}),c.fadeOut())})})};a.fn.wpvColorPicker=function(){var b=this;return c||f(),a("[type=color], .wpv-color-input",b).not(".wpv-colorpicker").each(function(){a(this).prop("type","text").addClass("wpv-colorpicker"),e.linkTo(this)}).on("focus",null,function(){d&&a(d).removeClass("colorwell-selected");var b=this;e.linkTo(function(c){a(b).val(c).change()}),c.css({position:"absolute",left:a(this).offset().left+a(this).outerWidth(),top:a(this).offset().top}).fadeIn(),a(d=this).addClass("colorwell-selected")}).on("blur",null,function(){c.fadeOut()}).on("change keyup",null,function(){a(this).css({"background-color":a(this).val()})}),this}}(jQuery),function(a,b){"use strict";a.ajax({type:"POST",url:ajaxurl,data:{action:"wpv-get-icon-list"},success:function(b){window.VamtamIconsCache=b,a(document).trigger("vamtam-icons-loaded")}}),a.fn.wpvIconsSelector=function(b){var c=a(".wpv-config-icons-selector",this);return function(){var a=/MSIE (\d+)/.exec(navigator.userAgent);if(!a||8===a[1]){var b=function(){c.find(":radio.checked").removeClass("checked"),c.find(":checked").addClass("checked")};c.find(":radio").unbind("change.wpvicons").bind("change.wpvicons",b),b()}}(),function(){var d=function(b,c){var d=b.find(":checked"),f=d.val(),g=d.prop("name")||(new Date).getTime().toString(16),h=b.find(".icons-wrapper");d.remove();var i=function(b,c){var d=a('<input type="radio" />').attr("name",g).attr("id",g+b).val(b),e=a('<label class="single-icon" />').attr("for",g+b).html(c);return b===f&&d.attr("checked","checked"),d.add(e)};for(var j in c)h.append(i(j,c[j]));h.removeClass("spinner"),b.addClass("icons-loaded").find(".icons-filter").bind("change paste keydown keyup search",function(){var c=a(this).val().toLowerCase();b.find("label:has(span[title])").show().each(function(){a(this).find("span").attr("title").toLowerCase().match(c)||a(this).hide()})}),setTimeout(function(){e(b)},100)},e=function(b){b.each(function(){a(this).find(".icons-wrapper").scrollTop(0),a(this).find(".icons-wrapper").scrollTop(a(this).find(":checked + label").offset().top-a(this).find(".icons-wrapper").offset().top)})};c.filter(":not(.icons-loaded)").each(function(){var b=a(this);window.VamtamIconsCache?d(b,window.VamtamIconsCache):a(document).one("vamtam-icons-loaded",function(){d(b,window.VamtamIconsCache)})}),c.filter(".icons-loaded").each(function(){var c=a(this);if("string"==typeof b)switch(b){case"scroll":e(c)}})}(),this}}(jQuery),function(a,b){"use strict";a.fn.wpvBackgroundOption=function(){return a(this).find(".wpv-config-row.background:not(.wpvbg-loaded)").each(function(){var b=a(this).addClass("wpvbg-loaded"),c=b.find(".bg-block.bg-size"),d=b.find(".bg-block.bg-repeat"),e=b.find(".bg-block.bg-position");c.find("input").bind("change",function(){d.add(e).show(),"cover"===a(":checked",c).val()&&d.add(e).hide()}).change()}),this}}(jQuery),function(a,b){"use strict";a(function(){var b=a(".widget-liquid-right");b.append(a("#wpv-add-sidebar-ui").html()),b.find(".sidebar-vamtam-custom").append(function(){return a('<span class="wpv-delete-sidebar"></span>').click(function(){if(confirm("Are you sure you want to delete this widget area?")){var c=a(this).parent(),d=c.find(".widgets-sortables").attr("id").replace(/-(right|left)$/,"").replace(/^wpv_sidebar-/,""),e=c.find(".sidebar-name h3"),f=a.trim(e.text()).replace(/ \([^\)]+\)$/,""),g=e.find(".spinner");g.addClass("wpv-active-spinner"),a.ajax({type:"POST",url:ajaxurl,data:{action:"wpv-delete-widget-area",name:f,_wpnonce:b.find('input[name="wpv-sidebars-nonce"]').val()},success:function(){c.parent().find(".sidebar-vamtam-custom:has(#wpv_sidebar-"+d+"-right), .sidebar-vamtam-custom:has(#wpv_sidebar-"+d+"-left)").slideUp()}})}})})})}(jQuery),function(a,b){"use strict";a.WPV=a.WPV||{},a.WPV.upload={init:function(){var b;a(document).on("click",".wpv-upload-button",function(c){var d=a(this).attr("data-target");b=wp.media.frames.file_frame=wp.media({multiple:!1,library:{type:a(this).hasClass("wpv-video-upload")?"video":"image"}}),b.on("select",function(){var c=b.state().get("selection").first();a.WPV.upload.fill(d,c.attributes.url)}),b.open(),c.preventDefault()}),a(document).on("click",".wpv-upload-clear",function(b){a.WPV.upload.remove(a(this).attr("data-target")),b.preventDefault()}),a(document).on("click",".wpv-upload-undo",function(b){a.WPV.upload.undo(a(this).attr("data-target")),b.preventDefault()})},fill:function(b,c){if(/^\s*$/.test(c))return void a.WPV.upload.remove(b);var d=a("#"+b);d.data("undo",d.val()),d.val(c),d.siblings(".wpv-upload-clear, .wpv-upload-undo").css({display:"inline-block"}),a.WPV.upload.preview(b,c)},preview:function(b,c){a("#"+b+"_preview").parents(".upload-basic-wrapper").addClass("active"),a("#"+b+"_preview").find("img").attr("src",c).css({display:"inline-block"})},remove:function(b){var c=a("#"+b);a("#"+b+"_preview").find("img").attr("src","").hide(),a("#"+b+"_preview").parents(".upload-basic-wrapper").removeClass("active"),c.data("undo",c.val()).val("").siblings(".wpv-upload-undo").css({display:"inline-block"}).siblings(".wpv-upload-clear").hide()},undo:function(b){var c=a("#"+b);this.preview(b,c.data("undo")),c.val(c.data("undo")),c.data("undo","").siblings(".wpv-upload-undo").hide();var d=c.siblings(".wpv-upload-clear");0===c.val().length&&d.is(":visible")?d.hide():c.val().length>0&&d.is(":hidden")&&d.css({display:"inline-block"})}}}(jQuery),function(a,b){"use strict";a.WPV=a.WPV||{},a.WPV.icon_manager={init:function(){var b,c;a(document).on("click",".vamtam-upload-icon-font",function(d){b=wp.media.frames.file_frame=wp.media({multiple:!1,library:{type:"application/zip"}}),b.on("select",function(){var d=b.state().get("selection").first();c=d.id,a(".vamtam-icon-font-setup .step-1 .step-in-progress").text(d.attributes.filename).show(),a(".vamtam-icon-font-setup .postbox-container.step-2").removeClass("inactive")}),b.open(),d.preventDefault()}),a(document).on("click",".vamtam-process-icon-font",function(b){b.preventDefault();var d=a(this);d.siblings(".step-in-progress").show(),a.ajax({type:"POST",url:ajaxurl,data:{action:"wpv-process-icon-font",selected:c,_ajax_nonce:a(this).data("nonce")},dataType:"json",success:function(b){d.siblings(".step-in-progress").hide();var c="";if("error"in b)c=b.error;else for(var e in b){c+="custom-"+e+': <svg width="32" height="32" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">';for(var f=0;f<b[e].length;f++)c+='<path d="'+b[e][f]+'" fill="#666"/>';c+="</svg><br>"}a(".vamtam-icon-font-setup .postbox-container.step-3").removeClass("inactive").find(".result-generated").html(c).parent().show()}})})}},a.WPV.icon_manager.init()}(jQuery),function(a,b){"use strict";a.WPV=a.WPV||{},a.WPV.horizontal_blocks={init:function(){a(".horizontal_blocks .wpv-range-input").change(function(){a.WPV.horizontal_blocks.set_active(a(this).val(),a(this).attr("id"))}),a(".horizontal_blocks select").change(function(){a.WPV.horizontal_blocks.resize(a(this).parents(".block").parent(),a(this).val())}),a('.horizontal_blocks [name*="last"]').change(function(){var b=a(this).parents(".block").parent();b.is(".last")!==a(this).is(":checked")&&a.WPV.horizontal_blocks.toggle_last(b)})},set_active:function(b,c){a('[rel="'+c+'"]').removeClass("active"),a('[rel="'+c+'"]:lt('+b+")").addClass("active")},resize:function(a,b){a.removeClass(a.attr("data-width")).addClass(b).attr("data-width",b),"full"===b?a.find("label").hide():a.find("label").show()},toggle_last:function(a){a.is(".last")?a.removeClass("last").next().remove():a.addClass("last").after('<div class="clearboth"></div>')}}}(jQuery),function(a,b){"use strict";0!==a("#wpv-tmpl-social-link").length&&(a.WPV=a.WPV||{},a.WPV.Views=a.WPV.Views||{},a.WPV.Models=a.WPV.Models||{},a.WPV.Collections=a.WPV.Collections||{},a.WPV.Models.SocialLink=Backbone.Model.extend({defaults:{"icon-name":"","icon-text":"","icon-link":""}}),a.WPV.Collections.SocialLinks=Backbone.Collection.extend({model:a.WPV.Models.SocialLink}),a.WPV.Views.SocialLinkView=Backbone.View.extend({tagName:"tr",template:_.template(a("#wpv-tmpl-social-link").html()),events:{"change select":"save","change input":"save","keydown input":"save","click .icon-change":"changeIcon"},save:function(){var a={};for(var b in this.model.attributes){var c=this.$el.find('[name="'+b+'"]');c.length&&(a[b]=c.val())}this.model.set(a),this.options.parent.$el.next("textarea.data").val(JSON.stringify(this.model.collection)),this.render()},render:function(){this.$el.html(this.template(this.model.attributes));for(var a in this.model.attributes){var b=this.model.attributes[a];this.$el.find('[name="'+a+'"]').val(b)}return this.$el.find(".icon-preview").html(window.VamtamIconsCache[this.model.attributes["icon-name"]]),this},changeIcon:function(a){a.preventDefault();var b=this.options.parent.$el.addClass("hidden"),c=b.prev(".wpv-config-icons-selector").removeClass("hidden"),d=this;c.find('[value="'+this.model.attributes["icon-name"]+'"]').prop("checked",!0).change(),c.parent().wpvIconsSelector("scroll"),c.find(":radio").bind("change.wpv-social-links",function(){b.removeClass("hidden"),c.addClass("hidden"),d.$el.find('[name="icon-name"]').val(c.find(":checked").val()).change(),c.find(":radio").unbind("change.wpv-social-links")})}}),a.WPV.Views.SocialLinksView=Backbone.View.extend({template:_.template(a("#wpv-tmpl-social-links").html()),events:{"click .add-new-icon":"addNew"},initialize:function(){this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"add",this.render),this.render()},render:function(){this.$el.html(this.template());var b=this.$el.find(".current-icons");return this.collection.each(function(c){var d=new a.WPV.Views.SocialLinkView({model:c,parent:this});b.append(d.render().$el)},this),this},addNew:function(a){a.preventDefault(),this.collection.add(new this.collection.model)}}),a(document).one("vamtam-icons-loaded",function(){a(".wpv-config-row.social-links").each(function(){var b=a.parseJSON(a("textarea.data",this).val()),c=a(this);new a.WPV.Views.SocialLinksView({el:a(".social-links-builder",c),collection:new a.WPV.Collections.SocialLinks(b)})})}))}(jQuery),function(a,b){"use strict";a.WPV=a.WPV||{},a(function(){function b(b){var c=a.parseJSON(a(b).attr("data-fields")),d=!0;for(var e in c){var f=a('[name="'+e+'"]');if(f.is(":checkbox")){var g=!!c[e],h=f.is(":checked");if(g!==h){d=!1;break}}else if(!f.val()||!c[e]||f.val().toString()!==c[e].toString()){d=!1;break}}d&&a(b).addClass("selected")}function c(b){var c=a(b).closest(".wpv-config-row.font"),d=c.find(".font-preview"),e=function(){var b=document.createElement("LINK");b.rel="stylesheet",b.type="text/css",c.find(".font-styles").html("")[0].appendChild(b),a.ajax({type:"POST",url:ajaxurl,data:{action:"wpv-font-preview",face:c.find(".face").val(),weight:c.find(".weight").val()},success:function(a){b.href=a,d.css({font:f,color:c.find(".wpv-color-input").val()})}})};if(a(b).is(".wpv-color-input"))d.css("color",c.find(".wpv-color-input").val());else{var f=c.find(".weight").val()+" "+c.find(".size").val()+"px/"+c.find(".lheight").val()+'px "'+c.find(".face").val()+'"';if(a(b).hasClass("face")){var g=c.find(".weight"),h=g.val();g.empty(),a(WPV_ADMIN.fonts[a(b).val()].weights).each(function(a,b){g.append("<option>"+b+"</option>")}),g.val(h),e()}else a(b).hasClass("weight")?e():d.css({font:f,color:c.find(".wpv-color-input").val()})}}a("body").wpvColorPicker().wpvIconsSelector().wpvBackgroundOption(),a(".wpv-range-input").uirange(),d.init(),a.WPV.horizontal_blocks.init(),a.WPV.upload.init(),a(document).on("change select","[data-field-filter]",function(){var b=a(this).attr("data-field-filter"),c=a(":checked",this).val(),d=a(this).closest(".wpv-config-group").find("."+b).filter(":not(.hidden)");d.show().filter(":not(."+b+"-"+c+")").hide()}),a("[data-field-filter]").change(),"WPV_ADMIN"in window&&WPV_ADMIN.stylesurl&&a("#customize-current-theme-link, .hide-if-no-customize").attr("href",WPV_ADMIN.stylesurl),a("body").on("click",".vamtam-check-license",function(b){var c=a(this);c.hasClass("disabled")||(c.siblings().remove(),c.css("display","inline-block").addClass("disabled"),c.after('<span class="spinner" style="display:inline-block;float:none" />'),a.ajax({type:"POST",url:ajaxurl,data:{action:"wpv-check-license","license-key":a("#envato-license-key").val(),nonce:a(this).attr("data-nonce")},success:function(b){c.removeClass("disabled").siblings().remove(),c.after(a("<p />").addClass("vamtam-check-license-help").append("<hr />").append(c.data("full-info"))),c.after(a("<p />").addClass("vamtam-check-license-response").append("<hr />").append(b))}}),b.preventDefault())}),a("body").on("click",".wpv-icon-selector-trigger",function(b){var c=a("#wpwrap > .wpv-config-icons-selector"),d=a(this);a.magnificPopup.open({type:"inline",items:{src:c},closeOnBgClick:!1,callbacks:{open:function(){c.show()},close:function(){c.hide()}}}),c.find('[value="'+a(this).data("icon-name")+'"]').prop("checked",!0).change(),c.parent().wpvIconsSelector("scroll"),c.find(":radio").bind("change.wpv-icons-selector",function(){var b=c.find(":checked"),e=b.val();a.magnificPopup.close(),d.data("icon-name",e);var f=d.find("+ input");f&&f.val(e),d.html(b.next().find("span").html()),d.removeClass("theme no-icon"),e.match(/^theme-/)?d.addClass("theme"):e.match(/^\s*$/)&&d.addClass("no-icon").html(""),c.find(":radio").unbind("change.wpv-icons-selector");try{a.WPVED.saveHTML()}catch(g){}}),b.preventDefault()}),a(document).on("change",".social_icon_select_sites",function(){var b=a(this).closest("p").siblings(".social_icon_wrap");b.children("p").hide(),a("option:selected",this).each(function(){b.find(".social_icon_"+a(this).val()).show()})}),a(document).on("change",".num_shown",function(){var b=a(this).closest("p").siblings(".hidden_wrap");b.children("div").hide(),a(".hidden_el:lt("+a(this).val()+")",b).show()}),a(".metabox").each(function(){var b=a("<ul>").addClass("wpv-meta-tabs");a(".config-separator:first",this).before(b),a(".config-separator",this).each(function(){var c=a(this).text().replace(/[\s\n]+/g,"").toLowerCase();a(this).nextUntil(".config-separator").wrapAll('<div class="wpv-meta-part" id="tab-'+c+'"></div>'),a(this).css("cursor","pointer"),a(this).next().is(".wpv-meta-part")&&b.append('<li class="wpv-meta-tab '+a(this).attr("data-tab-class")+'"><a href="#tab-'+c+'" title="">'+a(this).text()+"</a></li>"),a(this).remove()}),b.children().length>1?b.closest(".metabox").tabs():b.hide()}),a("#wpv-config").tabs({activate:function(b,c){var d=c.newTab.context.hash,e=a(d);e.attr("id",""),window.location.hash=d,e.attr("id",d.replace("#","")),a(".save-wpv-config").show(),c.newTab.hasClass("nosave")&&a(".save-wpv-config").hide()},create:function(b,c){c.tab.hasClass("nosave")&&a(".save-wpv-config").hide()}}),a("body").on("click",".info-wrapper > a",function(b){var c=a(this).attr("data-other");a(this).attr("data-other",a(this).text()).text(c),a(this).siblings(".desc").slideToggle(200),b.preventDefault()}),a("body").on("click",".wpv-autofill",function(){a(this).addClass("selected").siblings().removeClass("selected");var b=a.parseJSON(a(this).attr("data-fields")),c=a(this).closest(".wpv-config-group");for(var d in b){var e=c.find('[name="'+d+'"]');e.is(":checkbox")?1===b[d]?e.attr("checked","checked"):e.attr("checked",!1):(e.val(b[d]),e.is(".image-upload")&&a.WPV.upload.fill(e.attr("id"),b[d])),e.change()}return!1}),a(".wpv-autofill").each(function(){b(this);var c=this,d=a.parseJSON(a(c).attr("data-fields")),e=function(){a(c).removeClass("selected"),b(c)};for(var f in d)a("#"+f).change(e)}),a(".wpv-config-row.body-layout label").click(function(){a(this).addClass("selected"),a(this).parent().siblings().find("label").removeClass("selected")}),a(".wpv-config-row.body-layout input").change(function(){a(this).is(":checked")&&a('label[for="'+a(this).attr("id")+'"]').click()}),a(document).on("click","label img",function(){a("#"+a(this).parents("label").attr("for")).click()}),a(".wpv-config-row.font input, .wpv-config-row.font select").bind("change",function(){c(this)}),setTimeout(function(){a(".wpv-config-row.font").each(function(){c(a(".face",this)[0])})},0),a("#wpv-ajax-overlay, #wpv-ajax-content").remove(),a(".wpv-config-page form").submit(function(){return a("body").append('<div id="wpv-ajax-overlay"></div><div id="wpv-ajax-content">Saving</div>'),a.post(ajaxurl,a(this).serialize(),function(b){a("#wpv-ajax-content").html(b),setTimeout(function(){a("#wpv-ajax-overlay, #wpv-ajax-content").fadeOut(300,function(){a("#wpv-ajax-overlay, #wpv-ajax-content").remove()})},1e3)}),!1})});var c=function(b){for(var c in b){var d="object"==typeof b[c]?"[]":"",e=a('[name="'+c+d+'"]');e.is(".static")||(e.is(":radio")?e.filter('[value="'+b[c]+'"]').attr("checked",!0).change():e.is(":checkbox")?1===b[c]?e.attr("checked",!0):e.attr("checked",!1):(e.val(b[c]).change(),e.is("[type=color]")&&e.trigger("keyup")),e.is(".image-upload")&&a.WPV.upload.fill(e.attr("id"),b[c]))}},d={init:function(){a("#export-config").click(function(){var b=a("#export-config-name").val().replace(/^\s+/,"").replace(/\s+$/,"");b.length&&d.save(a("#export-config-prefix").val()+"_"+b)}).parent().append('<span class="result"></span>'),a("#import-config").click(function(){window.confirm("Are you sure you want to import a skin? You will lose any changes you've made since you last exported a skin.")&&d.load(a("#import-config-available").val())}).parent().append('<span class="result"></span>'),a("#delete-config").click(function(){!a("#import-config-available").val().match(/^\s+$/)&&window.confirm("Are you sure you want to delete this? It's permanent")&&d.del(a("#export-config-prefix").val()+"_"+a("#import-config-available :selected").text())}),this.get_available()},save:function(b){if(!b.match(/^\s*$/)){var c=a("#export-config").closest(".wpv-config-row").find(".spinner").css({display:"inline-block"});a.post(ajaxurl,{action:"wpv-save-skin",file:b},function(b){d.get_available(),c.hide(),a("#export-config").parent().find(".result").html(b),setTimeout(function(){a("#export-config").parent().find(".result").fadeOut("fast",function(){a(this).html("").show()})},5e3)})}},get_available:function(){a.post(ajaxurl,{action:"wpv-available-skins",prefix:a("#export-config-prefix").val()},function(b){a("#import-config-available").html(b)})},del:function(b){var c=a("#import-config").closest(".wpv-config-row").find(".spinner").css({display:"inline-block"});a.post(ajaxurl,{action:"wpv-delete-skin",file:b},function(b){d.get_available(),c.hide(),a("#import-config").parent().find(".result").html(b),setTimeout(function(){a("#import-config").parent().find(".result").fadeOut("fast",function(){a(this).html("").show()})},3e3)})},load:function(b){var d=a("#import-config").closest(".wpv-config-row").find(".spinner").css({display:"inline-block"});a.post(ajaxurl,{action:"wpv-load-skin",file:b,name:a("#import-config-available :selected").text()},function(b){c(b.data),d.hide(),a("#import-config").parent().find(".result").html(b.text),setTimeout(function(){a("#import-config").parent().find(".result").fadeOut("fast",function(){a(this).html("").show()})},3e3)},"json")}}}(jQuery),function(a,b){"use strict";a(function(){var b=[{options:"#vamtam-post-format-options",select:"#post-formats-select"},{options:"#vamtam-portfolio-format-options",select:"#vamtam-portfolio-formats-select"}];_.each(b,function(b){var c=a(b.options);if(c.length){var d=c.find(".wpv-meta-tabs").hide(),e=a(b.select);e.find(":radio").change(function(){var b=e.find(":checked"),c=b.prop("id")||"post-format-"+b.val(),f=d.find("li.wpv-"+c+" a");f.click(),d.parent().find(".wpv-config-row.wpv-all-formats").appendTo(a(f.attr("href")))}).change(),c.insertBefore(a("#postdivrich")).show()}})})}(jQuery);